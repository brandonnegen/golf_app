/*! golf_app 2015-09-03 */
var homeApp=angular.module("homeApp");homeApp.controller("StatController",["$scope","$http",function(a,b){console.log("Stat is working"),a.round={},a.rounds=[],a.parOne=5,a.parTwo=5,a.parThree=3,a.parFour=4,a.parFive=4,a.parSix=4,a.parSeven=5,a.parEight=3,a.parNine=4,a.totalHoles=0;var c=document.getElementById("accuracyDonut").getContext("2d"),d=(new Chart(c).Doughnut(a.accuracyChart),document.getElementById("scoreDonut").getContext("2d"));new Chart(d).Doughnut(a.scoreChart);a.toggle=function(){a.showChart=!a.showChart},a.getDates=function(){b.get("/data").then(function(b){a.round={},a.rounds=b.data;for(var c=0;c<b.data.length;c++)a.raw=JSON.stringify(b.data[c].date),a.string=JSON.parse(a.raw),a.dateFormatted=new Date(a.string),a.roundDates=a.dateFormatted,console.log(a.roundDates)})},a.getAverage=function(){b.get("/data").then(function(b){a.round={},a.rounds=b.data,a.sum=0;for(var c=0;c<b.data.length;c++)a.sum+=b.data[c].scoreTotal,a.total=(a.sum/b.data.length).toFixed(0)})},a.getPutts=function(){b.get("/data").then(function(b){a.round={},a.rounds=b.data,a.totalPutts=0,a.puttAverage=0;for(var c=0;c<b.data.length;c++)a.totalHoles+=b.data[c].holesPlayed,a.totalPutts+=b.data[c].puttsTotal,a.puttAverage=(a.totalPutts/a.totalHoles).toFixed(1)})},a.getAccuracy=function(){b.get("/data").then(function(b){a.round={},a.rounds=b.data,a.shotsLeft=0,a.percentageLeft=0,a.shotsCenter=0,a.percentageCenter=0,a.shotsRight=0,a.percentageRight=0;for(var c=0;c<b.data.length;c++)"Left"==b.data[c].areaOne?a.shotsLeft++:"Center"==b.data[c].areaOne?a.shotsCenter++:"Right"==b.data[c].areaOne&&a.shotsRight++,"Left"==b.data[c].areaTwo?a.shotsLeft++:"Center"==b.data[c].areaTwo?a.shotsCenter++:"Right"==b.data[c].areaTwo&&a.shotsRight++,"Left"==b.data[c].areaThree?a.shotsLeft++:"Center"==b.data[c].areaThree?a.shotsCenter++:"Right"==b.data[c].areaThree&&a.shotsRight++,"Left"==b.data[c].areaFour?a.shotsLeft++:"Center"==b.data[c].areaFour?a.shotsCenter++:"Right"==b.data[c].areaFour&&a.shotsRight++,"Left"==b.data[c].areaFive?a.shotsLeft++:"Center"==b.data[c].areaFive?a.shotsCenter++:"Right"==b.data[c].areaFive&&a.shotsRight++,"Left"==b.data[c].areaSix?a.shotsLeft++:"Center"==b.data[c].areaSix?a.shotsCenter++:"Right"==b.data[c].areaSix&&a.shotsRight++,"Left"==b.data[c].areaSeven?a.shotsLeft++:"Center"==b.data[c].areaSeven?a.shotsCenter++:"Right"==b.data[c].areaSeven&&a.shotsRight++,"Left"==b.data[c].areaEight?a.shotsLeft++:"Center"==b.data[c].areaEight?a.shotsCenter++:"Right"==b.data[c].areaEight&&a.shotsRight++,"Left"==b.data[c].areaNine?a.shotsLeft++:"Center"==b.data[c].areaNine?a.shotsCenter++:"Right"==b.data[c].areaNine&&a.shotsRight++,a.totalHoles+=b.data[c].holesPlayed,a.percentageLeft=Math.round(a.shotsLeft/a.totalHoles*100),a.percentageCenter=Math.round(a.shotsCenter/a.totalHoles*100),a.percentageRight=Math.round(a.shotsRight/a.totalHoles*100),a.accuracyLabels=[a.percentageLeft+"% Left",a.percentageCenter+"% Center",a.percentageRight+"% Right"],a.accuracyDataset=[a.percentageLeft,a.percentageCenter,a.percentageRight],a.accuracyChart=[{data:a.accuracyDataset,label:a.accuracyLabels}]})},a.getGiR=function(){b.get("/data/").then(function(b){a.round={},a.rounds=b.data,a.GiR=0,a.GiRPercentage=0,a.girOne=a.parOne-2,a.girTwo=a.parTwo-2,a.girThree=a.parThree-2,a.girFour=a.parFour-2,a.girFive=a.parFive-2,a.girSix=a.parSix-2,a.girSeven=a.parSeven-2,a.girEight=a.parEight-2,a.girNine=a.parNine-2;for(var c=0;c<b.data.length;c++)b.data[c].scoreOne-b.data[c].puttsOne==a.girOne&&a.GiR++,b.data[c].scoreTwo-b.data[c].puttsTwo==a.girTwo&&a.GiR++,b.data[c].scoreThree-b.data[c].puttsThree==a.girThree&&a.GiR++,b.data[c].scoreFour-b.data[c].puttsFour==a.girFour&&a.GiR++,b.data[c].scoreFive-b.data[c].puttsFive==a.girFive&&a.GiR++,b.data[c].scoreSix-b.data[c].puttsSix==a.girSix&&a.GiR++,b.data[c].scoreSeven-b.data[c].puttsSeven==a.girSeven&&a.GiR++,b.data[c].scoreEight-b.data[c].puttsEight==a.girEight&&a.GiR++,b.data[c].scoreNine-b.data[c].puttsNine==a.girNine&&a.GiR++,a.totalHoles+=b.data[c].holesPlayed,a.GiRPercentage=Math.round(a.GiR/a.totalHoles*100)})},a.getScores=function(){b.get("/data").then(function(b){a.round={},a.rounds=b.data,a.doubleEagles=0,a.eagles=0,a.birdies=0,a.pars=0,a.bogeys=0,a.doubleBogeys=0,a.overDouble=0;for(var c=0;c<b.data.length;c++)b.data[c].scoreOne==a.parOne-3?a.doubleEagles++:b.data[c].scoreOne==a.parOne-2?a.eagles++:b.data[c].scoreOne==a.parOne-1?a.birdies++:b.data[c].scoreOne==a.parOne?a.pars++:b.data[c].scoreOne==a.parOne+1?a.bogeys++:b.data[c].scoreOne==a.parOne+2&&a.doubleBogeys++,b.data[c].scoreTwo==a.parTwo-3?a.doubleEagles++:b.data[c].scoreTwo==a.parTwo-2?a.eagles++:b.data[c].scoreTwo==a.parTwo-1?a.birdies++:b.data[c].scoreTwo==a.parTwo?a.pars++:b.data[c].scoreTwo==a.parTwo+1?a.bogeys++:b.data[c].scoreTwo==a.parTwo+2&&a.doubleBogeys++,b.data[c].scoreThree==a.parThree-3?a.doubleEagles++:b.data[c].scoreThree==a.parThree-2?a.eagles++:b.data[c].scoreThree==a.parThree-1?a.birdies++:b.data[c].scoreThree==a.parThree?a.pars++:b.data[c].scoreThree==a.parThree+1?a.bogeys++:b.data[c].scoreThree==a.parThree+2&&a.doubleBogeys++,b.data[c].scoreFour==a.parFour-3?a.doubleEagles++:b.data[c].scoreFour==a.parFour-2?a.eagles++:b.data[c].scoreFour==a.parFour-1?a.birdies++:b.data[c].scoreFour==a.parFour?a.pars++:b.data[c].scoreFour==a.parFour+1?a.bogeys++:b.data[c].scoreFour==a.parFour+2&&a.doubleBogeys++,b.data[c].scoreFive==a.parFive-3?a.doubleEagles++:b.data[c].scoreFive==a.parFive-2?a.eagles++:b.data[c].scoreFive==a.parFive-1?a.birdies++:b.data[c].scoreFive==a.parFive?a.pars++:b.data[c].scoreFive==a.parFive+1?a.bogeys++:b.data[c].scoreFive==a.parFive+2&&a.doubleBogeys++,b.data[c].scoreSix==a.parSix-3?a.doubleEagles++:b.data[c].scoreSix==a.parSix-2?a.eagles++:b.data[c].scoreSix==a.parSix-1?a.birdies++:b.data[c].scoreSix==a.parSix?a.pars++:b.data[c].scoreSix==a.parSix+1?a.bogeys++:b.data[c].scoreSix==a.parSix+2&&a.doubleBogeys++,b.data[c].scoreSeven==a.parSeven-3?a.doubleEagles++:b.data[c].scoreSeven==a.parSeven-2?a.eagles++:b.data[c].scoreSeven==a.parSeven-1?a.birdies++:b.data[c].scoreSeven==a.parSeven?a.pars++:b.data[c].scoreSeven==a.parSeven+1?a.bogeys++:b.data[c].scoreSeven==a.parSeven+2&&a.doubleBogeys++,b.data[c].scoreEight==a.parEight-3?a.doubleEagles++:b.data[c].scoreEight==a.parEight-2?a.eagles++:b.data[c].scoreEight==a.parEight-1?a.birdies++:b.data[c].scoreEight==a.parEight?a.pars++:b.data[c].scoreEight==a.parEight+1?a.bogeys++:b.data[c].scoreEight==a.parEight+2&&a.doubleBogeys++,b.data[c].scoreNine==a.parNine-3?a.doubleEagles++:b.data[c].scoreNine==a.parNine-2?a.eagles++:b.data[c].scoreNine==a.parNine-1?a.birdies++:b.data[c].scoreNine==a.parNine?a.pars++:b.data[c].scoreNine==a.parNine+1?a.bogeys++:b.data[c].scoreNine==a.parNine+2&&a.doubleBogeys++,a.scoreLabels=[a.doubleEagles+" Double Eagles",a.eagles+" Eagles",a.birdies+" Birdies",a.pars+" Pars",a.bogeys+" Bogeys",a.doubleBogeys+" Double Bogeys"],a.scoreDataset=[a.doubleEagles,a.eagles,a.birdies,a.pars,a.bogeys,a.doubleBogeys],a.scoreChart=[{data:a.scoreDataset,label:a.scoreLabels}]})},a.getAverage(),a.getScores(),a.getAccuracy(),a.getPutts(),a.getDates(),a.getGiR()}]),homeApp.controller("TrackController",function(){console.log("Track is working")}),homeApp.controller("SelectAccuracy",["$scope",function(a){a.accuracy=["Left","Center","Right"]}]),homeApp.controller("PostRound",["$scope","$http",function(a,b){a.round={},a.updateRound=function(a,c){b.post("/data",c)}}]);